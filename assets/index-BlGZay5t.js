(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const S=e=>new Date(e).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit",hour12:!1});function i(e){return new URLSearchParams(window.location.search).get(e)}const l="userId",u=e=>{try{return JSON.parse(localStorage.getItem(e))||[]}catch(t){return console.error("Ошибка при получении сообщений из localStorage:",t),[]}};function f(e){const t=i(l),s=u(t);s.messages.push(e),localStorage.setItem(t,JSON.stringify(s))}function m(e,t,s){const r={name:t,messages:s};localStorage.setItem(e,JSON.stringify(r))}function T(){localStorage.length>0||(m(1,"Покемон",[{name:"Покемон",text:"Привет! Как дела?",time:"2024-09-25T11:50:01.205Z"},{name:"me",text:"Привет! Нормально, только устала после работы. А у тебя?",time:"2024-09-25T11:50:01.205Z"},{name:"Покемон",text:"Тоже ничего, только приехала с дачи. У вас есть планы на вечер?",time:"2024-09-25T11:50:01.205Z"},{name:"me",text:"Да, собираюсь сходить в кино с подругой. А ты?",time:"2024-09-25T11:50:01.205Z"}]),m(2,"Шарик",[{name:"Шарик",text:"Привет! Слышал, ты уволился с работы?",time:"2024-09-25T11:50:01.205Z"},{name:"me",text:"Привет! Да, свалил оттуда, как от чумы. Работал там просто невыносимо.",time:"2024-09-25T11:50:01.205Z"},{name:"Шарик",text:"А что дальше? Уже нашел новую?",time:"2024-09-25T11:50:01.205Z"},{name:"me",text:"Пока нет, но уже активно ищу. Надеюсь, что-нибудь подвернется.",time:"2024-09-25T11:50:01.205Z"}]),m(3,"Биби",[{name:"Биби",text:"Привет! Как успехи с йогой?",time:"2024-09-25T11:50:01.205Z"},{name:"me",text:"Привет! Спасибо, что спросила! Занимаюсь уже месяц, чувствую себя намного лучше.",time:"2024-09-25T11:50:01.205Z"},{name:"Биби",text:"Это здорово! А какой тебе стиль больше всего нравится?",time:"2024-09-25T11:50:01.205Z"},{name:"me",text:"Мне очень нравится хатха-йога. Она помогает расслабиться и настроиться на позитив.",time:"2024-09-25T11:50:01.205Z"}]))}const a={MESSAGE_LIST:document.querySelector(".message__list"),INPUT:document.querySelector(".form__input"),FORM:document.querySelector("form"),USER_NAME:document.querySelector(".header__username")};function g(){a.MESSAGE_LIST.scrollTop=a.MESSAGE_LIST.scrollHeight}const d=({text:e,time:t,name:s})=>{const r=document.querySelector("#message").content.cloneNode(!0);return r.querySelector(".message__text").textContent=e,r.querySelector(".message__time").textContent=S(t),r.querySelector(".message__name").textContent=s,r.querySelector(".message__block").classList.add(s==="me"?"message__block--me":"message__block--other"),r},_=()=>{const e=i(l);if(!e)return;a.MESSAGE_LIST.innerHTML="";const t=u(e);a.USER_NAME.textContent=t.name,t.messages.forEach(s=>{const r=d(s);a.MESSAGE_LIST.appendChild(r)}),g()},h=e=>{const t=d(e);a.MESSAGE_LIST.appendChild(t)};function p(e){e.preventDefault();const t=new Date,s=a.INPUT.value;if(!s.length)return;const r={name:"me",text:s,time:t};f(r),h(r),g(),e.target.reset()}a.FORM&&a.FORM.addEventListener("submit",p);T();_();
